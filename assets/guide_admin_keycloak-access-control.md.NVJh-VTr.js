import{_ as e,c as a,o as t,a8 as i,aq as o,ar as n,as as s,at as r}from"./chunks/framework.D7NPx0id.js";const w=JSON.parse('{"title":"Keycloak & Admin Access Control","description":"","frontmatter":{},"headers":[],"relativePath":"guide/admin/keycloak-access-control.md","filePath":"guide/admin/keycloak-access-control.md"}'),l={name:"guide/admin/keycloak-access-control.md"},d=i(`<h1 id="keycloak-admin-access-control" tabindex="-1">Keycloak &amp; Admin Access Control <a class="header-anchor" href="#keycloak-admin-access-control" aria-label="Permalink to &quot;Keycloak &amp; Admin Access Control&quot;">​</a></h1><p>Node administrators control access to the local components using Keycloak as an identity provider by default. Keycloak is installed with the other necessary services during deployment and is used for authorization and authentication of both the admin and the other node services.</p><h2 id="setting-the-default-login" tabindex="-1">Setting the Default Login <a class="header-anchor" href="#setting-the-default-login" aria-label="Permalink to &quot;Setting the Default Login&quot;">​</a></h2><p>During deployment, default credentials for the root user can be passed to Keycloak thus providing a username and password with which one can access the Keycloak console. To set these, simply modify the following default values found in the<code>values.yaml</code> or <code>values_min.yaml</code> file used during node deployment:</p><div class="language-yml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">keycloak</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    adminUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">myDefaultUser</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    adminPassword</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">myDefaultPassword</span></span></code></pre></div><h2 id="creating-a-new-admin-user" tabindex="-1">Creating a New Admin User <a class="header-anchor" href="#creating-a-new-admin-user" aria-label="Permalink to &quot;Creating a New Admin User&quot;">​</a></h2><p>Initially, only one user can access the Node UI since only the root user is created in Keycloak during deployment. In order to create another user with the ability to sign in to the Node UI via Keycloak, navigate to the Keycloak console. This can be found by appending <code>/keycloak</code> to the end of the domain used for the Node UI e.g. &quot;<a href="https://node1.privateaim.net/keycloak" target="_blank" rel="noreferrer">https://node1.privateaim.net/keycloak</a>&quot;.</p><h3 id="creating-a-new-user" tabindex="-1">Creating a New User <a class="header-anchor" href="#creating-a-new-user" aria-label="Permalink to &quot;Creating a New User&quot;">​</a></h3><p>Login to Keycloak with the <code>adminUser</code> and <code>adminPassword</code> used during deployment as described in the previous section. Once logged in, change the current realm to the &quot;flame&quot; realm:</p><p><a href="/images/keycloak_images/keycloak_5.png"><img src="`+o+'" alt="Changing Keycloak Realms"></a></p><p>Next, click on &quot;Users&quot; in the left sidebar, and then click on the blue &quot;Add User&quot; button in the middle of the window. Here, a new administrator can be created by performing the following steps:</p><ul><li>Because we must provide them with a temporary password to login, add &quot;Update Password&quot; to the list of &quot;Required user actions&quot;. This will have them set their own password upon first login.</li><li>Add a &quot;Username&quot; for the new administrator</li><li>The email and name fields can be filled in if known, otherwise left blank</li></ul><p>Your new user page should look similar to this:</p><p><a href="/images/keycloak_images/keycloak_6.png"><img src="'+n+'" alt="Creating a New Keycloak User"></a></p><p>Click &quot;Create&quot; and the new user will be added, and you will be directed to the &quot;Details&quot; tab for the user.</p><h3 id="setting-a-temporary-password" tabindex="-1">Setting a Temporary Password <a class="header-anchor" href="#setting-a-temporary-password" aria-label="Permalink to &quot;Setting a Temporary Password&quot;">​</a></h3><p>Finally, a temporary password must be set for the new administrator for their first login attempt. Click on the &quot;Credentials&quot; tab and then on the blue &quot;Set password&quot; button. Make sure the &quot;Temporary&quot; toggle is set to &quot;On&quot; and enter the same temporary password for the user in both of the fields on the screen.</p><p><a href="/images/keycloak_images/keycloak_7.png"><img src="'+s+'" alt="Setting a Temporary Password"></a></p><p>Click &quot;Save&quot; and now the username and temporary password can be given to the new administrator. When they first try to log in to the Node UI, they will be directed to create their own password and fill in any missing information such as their email and name. Once they complete that, the temporary password will be overwritten with the one they chose and they can from then on use their password and username to login to the Node UI as an administrator.</p><div class="info custom-block"><p class="custom-block-title">Unverified Email</p><p>New users may have red exclamation marks (!) next to their usernames when viewing the &quot;Users&quot; tab in Keycloak. This simply means their email hasn&#39;t been verified and will have no impact on their ability to log in to the Node UI.</p></div><h2 id="deleting-an-administrator" tabindex="-1">Deleting an Administrator <a class="header-anchor" href="#deleting-an-administrator" aria-label="Permalink to &quot;Deleting an Administrator&quot;">​</a></h2><p>Should you wish to remove an administrator&#39;s access to the Node UI, deleting their user account in Keycloak is quite easy. Make sure you are in the &quot;flame&quot; realm as shown in the top right of the Keycloak console page and navigate to the &quot;Users&quot; tab in the left sidebar. Select the user by clicking the box to the left of their username and then click &quot;Delete user&quot;, and confirm by clicking the red &quot;Delete&quot; button. The user will no longer be able to log in to the Node UI once this is completed.</p><p><a href="/images/keycloak_images/keycloak_8.png"><img src="'+r+'" alt="Deleting a Keycloak User"></a></p><h2 id="using-a-different-idp" tabindex="-1">Using a Different IDP <a class="header-anchor" href="#using-a-different-idp" aria-label="Permalink to &quot;Using a Different IDP&quot;">​</a></h2><p>Admins can configure the FLAME software to use a separate IDP (i.e. different Keycloak instance), which is incredibly useful when you already have an instance with your users and roles configured. This needs to be done during installation and instructions on how to achieve this can be found <a href="/guide/deployment/node-installation.html#using-your-own-idp">here</a>.</p>',25),h=[d];function c(u,p,m,g,k,y){return t(),a("div",null,h)}const b=e(l,[["render",c]]);export{w as __pageData,b as default};
