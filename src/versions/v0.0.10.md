# Upgrading to v0.0.10
> This release contains breaking changes for the `flame/flame-node` helm chart

## Node
### Helm - Breaking Changes!
Some of the template files had a dynamic value set in the selector labels causing `helm upgrade` to fail. This was fixed, but in order to upgrade, affected k8s resources must first be deleted to recreate the labels using the following command:
```bash
kubectl delete deploy/flame-node-node-ui-deployment deploy/flame-node-hub-adapter-deployment deploy/flame-node-node-result-deployment deploy/flame-node-node-message-broker deploy/flame-node-po svc/flame-node-node-ui-service svc/flame-node-hub-adapter-service svc/flame-node-node-result-service svc/flame-node-node-message-broker svc/flame-node-po-service svc/flame-node-keycloak-headless svc/flame-node-keycloak-http ing/flame-node-node-ui-ingress ing/flame-node-hub-adapter-ingress ing/flame-node-keycloak
```
and then perform the upgrade: 
```bash
helm upgrade <node-instance-name> -f <modified-values.yml> flame/flame-node --version 0.0.10
```

#### Values
The `headless` value was renamed to `autostart` for clarity


### UI
#### Autostart
**All** deNBI nodes are now configured to start new analyses automatically if the following criteria are met:
* The image build status is set to `finished`
* Both the project and analysis are `approved`
* Analysis was created on the hub within the last 24 hours
* A datastore exists for the project on the node (not required on aggregator nodes)

#### S3 Datastore
##### Bucket Name
The datastore creation tool was updated for S3 to improve clarity. Instead of "Path Name", you will now see "Bucket Name" and users no longer have to include a "/" in front of the bucket name (if you do, it's OK, the software can handle it). 

##### Bucket Access (upcoming feauture)
There is a new field called "Bucket Access" that you will see if you select S3 which is a toggle between "Private" and "Public" buckets. This is currently disabled as the feature is still in development, but soon you will be able to create datastores with private buckets using the secret and access keys from your MinIO instance.

#### Analysis Table
Several small updates were made to the analyses table:
* The "Created On" and "Last Updated" columns now show minutes/days ago if it was within the last week instead of just the date
* A progress bar now shows if an analysis is failed/not running (empty), running (moving white bar), or complete (100% green bar). In a future update, analyses that include progress updates using the SDK will show those updates using this bar
* Unless the analysis is marked as "failed" or "finished", the "Run Status" column will only show the status of an analysis if it reported by the local Pod Orchestrator. Previously, it relied on what was last reported to the Hub, but since that information was not always accurate, it now gets the current status directly from the local node
* Sessions now properly refresh using the refresh token instead of prompting the user to login to the IDP again

#### Logs
Log windows for analyses now have a "Copy to clipboard" and "Download" buttons and the the refresh toggle is enabled by default if an analysis is "running".

### Backend
Several fixes were applied to improve stability, with a focus on improving analysis startup routine.